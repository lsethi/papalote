// This is the main Angular application page.
// The Config function is run before the injector and before the RUN function
//  The run function is run after the config function.
//  An example of this is the config provides a route while the run function
// provides user authentication for the routes.


var app = angular.module('mksDriveApp',
  ['ngResource', 'ngRoute', 'ngAnimate', 'ngSanitize', 'flow', 'emoji', 'ui.ace',
  'luegg.directives']);

app.constant('constants',{
  "CHAT_SERVER_URL": "<%= Rails.application.config.chat_server %>"
});

app.config(["$routeProvider", function($routeProvider){

  $routeProvider.when("/", {
    templateUrl: "<%= asset_path('templates/home.html') %>",
    controller: "HomePageController"
  })
  .when('/docs/new', {
    templateUrl: "<%= asset_path('templates/doc-view.html') %>",
    controller: "DocNewController"
  })
  .when('/docs/:id', {
    templateUrl: "<%= asset_path('templates/doc-view.html') %>",
    controller: "DocController"
  })
  .when('/test', {
    templateUrl: "<%= asset_path('templates/test-upload.html.erb') %>"
  })
  .when("/folders/new", {
    templateUrl: "<%= asset_path('templates/new-folder-view.html') %>",
    controller: "NewFolderController"
  })
  .when("/folders/:id", {
    templateUrl: "<%= asset_path('templates/show-folder-view.html') %>",
    controller: "ViewFolderController"
  })
  .when('/search', {
    templateUrl: "<%= asset_path('templates/show-search.html') %>",
    controller: "SearchResultsCtrl"
  })
  .otherwise({
    redirectTo: "/"
  })

}]);
